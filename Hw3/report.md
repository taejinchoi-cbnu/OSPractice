# 고민한거

## 초기 아이디어: Fixed-size Chunk 방식
- paging에서 배운 고정 크기 chunk를 사용해서 mmap으로 할당받은 메모리를 전부 동일한 크기로 분할
- 내부 단편화는 감수하고 요청 크기와 상관없이 고정 크기 chunk 할당
- 구현이 단순할 것으로 예상

## 발견된 문제점: 외부 단편화
**상황:** chunk 크기보다 큰 요청이 들어올 때
- 예: 64바이트 chunk에서 100바이트 요청 → 2개 chunk 필요
- 문제: **연속된** 자유 chunk가 없으면 할당 실패, 이 연속된 때문에 문제가 생김

  ```bash
  [사용중][자유][사용중][자유][자유] 
  → 3개 chunk 요청 시 연속 공간 부족으로 실패
  ```

## 해결방안 고민
1. **정렬/병합 방식**
   - 장: 기존 구조 유지 가능
   - 단: 정렬 및 인접 chunk 병합하면 overhead 발생
   
2. **Buddy System 도입**
   - 장: 2^n 크기로 효율적 병합/분할, 외부 단편화 대폭 감소
   - 단: 구현 복잡도 증가
   
3. **가상 메모리 기법**
   - 페이징처럼 비연속 물리 메모리를 연속 가상 주소로 매핑 근데 사용자 레벨에서 MMU 없이는 구현 불가능

## 결론
하드웨어 지원 없는 소프트웨어 malloc에서는 Buddy System으로 해야할듯
